//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/actor-ios/build/java/com/droidkit/actors/tasks/AskFuture.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "com/droidkit/actors/tasks/ActorAskImpl.h"
#include "com/droidkit/actors/tasks/AskCallback.h"
#include "com/droidkit/actors/tasks/AskFuture.h"
#include "com/droidkit/actors/tasks/AskProgressCallback.h"
#include "com/droidkit/actors/tasks/AskTimeoutException.h"
#include "java/lang/Throwable.h"
#include "java/util/LinkedList.h"

@interface ComDroidkitActorsTasksAskFuture () {
 @public
  JavaUtilLinkedList *callbacks_;
  ComDroidkitActorsTasksActorAskImpl *askImpl_;
  jint reqId_;
  jboolean isCompleted__;
  jboolean isCanceled__;
  jboolean isError__;
  id result__;
  JavaLangThrowable *error__;
}
@end

J2OBJC_FIELD_SETTER(ComDroidkitActorsTasksAskFuture, callbacks_, JavaUtilLinkedList *)
J2OBJC_FIELD_SETTER(ComDroidkitActorsTasksAskFuture, askImpl_, ComDroidkitActorsTasksActorAskImpl *)
J2OBJC_FIELD_SETTER(ComDroidkitActorsTasksAskFuture, result__, id)
J2OBJC_FIELD_SETTER(ComDroidkitActorsTasksAskFuture, error__, JavaLangThrowable *)

@implementation ComDroidkitActorsTasksAskFuture

- (instancetype)initWithComDroidkitActorsTasksActorAskImpl:(ComDroidkitActorsTasksActorAskImpl *)askImpl
                                                   withInt:(jint)reqId {
  if (self = [super init]) {
    ComDroidkitActorsTasksAskFuture_setAndConsume_callbacks_(self, [[JavaUtilLinkedList alloc] init]);
    isCompleted__ = NO;
    isCanceled__ = NO;
    isError__ = NO;
    ComDroidkitActorsTasksAskFuture_set_result__(self, nil);
    ComDroidkitActorsTasksAskFuture_set_error__(self, nil);
    ComDroidkitActorsTasksAskFuture_set_askImpl_(self, askImpl);
    self->reqId_ = reqId;
  }
  return self;
}

- (void)addListenerWithComDroidkitActorsTasksAskCallback:(id<ComDroidkitActorsTasksAskCallback>)callback {
  [((JavaUtilLinkedList *) nil_chk(callbacks_)) addWithId:callback];
}

- (void)removeListenerWithComDroidkitActorsTasksAskCallback:(id<ComDroidkitActorsTasksAskCallback>)callback {
  [((JavaUtilLinkedList *) nil_chk(callbacks_)) removeWithId:callback];
}

- (jboolean)isCompleted {
  return isCompleted__;
}

- (jboolean)isError {
  return isError__;
}

- (jboolean)isCanceled {
  return isCanceled__;
}

- (JavaLangThrowable *)error {
  return error__;
}

- (id)result {
  return result__;
}

- (void)cancel {
  if (isCompleted__) {
    return;
  }
  isCompleted__ = YES;
  isError__ = NO;
  isCanceled__ = YES;
  [((ComDroidkitActorsTasksActorAskImpl *) nil_chk(askImpl_)) onTaskCancelledWithInt:reqId_];
}

- (void)onErrorWithJavaLangThrowable:(JavaLangThrowable *)throwable {
  if (isCompleted__) {
    return;
  }
  isCompleted__ = YES;
  isCanceled__ = NO;
  isError__ = YES;
  ComDroidkitActorsTasksAskFuture_set_error__(self, throwable);
  ComDroidkitActorsTasksAskFuture_set_result__(self, nil);
  for (id<ComDroidkitActorsTasksAskCallback> __strong callback in nil_chk(callbacks_)) {
    [((id<ComDroidkitActorsTasksAskCallback>) nil_chk(callback)) onErrorWithJavaLangThrowable:throwable];
  }
}

- (void)onResultWithId:(id)res {
  if (isCompleted__) {
    return;
  }
  isCompleted__ = YES;
  isCanceled__ = NO;
  isError__ = NO;
  ComDroidkitActorsTasksAskFuture_set_error__(self, nil);
  ComDroidkitActorsTasksAskFuture_set_result__(self, res);
  for (id<ComDroidkitActorsTasksAskCallback> __strong callback in nil_chk(callbacks_)) {
    [((id<ComDroidkitActorsTasksAskCallback>) nil_chk(callback)) onResultWithId:res];
  }
}

- (void)onProgressWithId:(id)res {
  if (isCompleted__) {
    return;
  }
  for (id<ComDroidkitActorsTasksAskCallback> __strong callback in nil_chk(callbacks_)) {
    if ([ComDroidkitActorsTasksAskProgressCallback_class_() isInstance:callback]) {
      [((id<ComDroidkitActorsTasksAskProgressCallback>) nil_chk(((id<ComDroidkitActorsTasksAskProgressCallback>) check_protocol_cast(callback, @protocol(ComDroidkitActorsTasksAskProgressCallback))))) onProgressWithId:res];
    }
  }
}

- (void)onTimeout {
  [self onErrorWithJavaLangThrowable:[[[ComDroidkitActorsTasksAskTimeoutException alloc] init] autorelease]];
}

- (void)dealloc {
  RELEASE_(callbacks_);
  RELEASE_(askImpl_);
  RELEASE_(result__);
  RELEASE_(error__);
  [super dealloc];
}

- (void)copyAllFieldsTo:(ComDroidkitActorsTasksAskFuture *)other {
  [super copyAllFieldsTo:other];
  ComDroidkitActorsTasksAskFuture_set_callbacks_(other, callbacks_);
  ComDroidkitActorsTasksAskFuture_set_askImpl_(other, askImpl_);
  other->reqId_ = reqId_;
  other->isCompleted__ = isCompleted__;
  other->isCanceled__ = isCanceled__;
  other->isError__ = isError__;
  ComDroidkitActorsTasksAskFuture_set_result__(other, result__);
  ComDroidkitActorsTasksAskFuture_set_error__(other, error__);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithComDroidkitActorsTasksActorAskImpl:withInt:", "AskFuture", NULL, 0x0, NULL },
    { "addListenerWithComDroidkitActorsTasksAskCallback:", "addListener", "V", 0x1, NULL },
    { "removeListenerWithComDroidkitActorsTasksAskCallback:", "removeListener", "V", 0x1, NULL },
    { "isCompleted", NULL, "Z", 0x1, NULL },
    { "isError", NULL, "Z", 0x1, NULL },
    { "isCanceled", NULL, "Z", 0x1, NULL },
    { "error", NULL, "Ljava.lang.Throwable;", 0x1, NULL },
    { "result", NULL, "TT;", 0x1, NULL },
    { "cancel", NULL, "V", 0x1, NULL },
    { "onErrorWithJavaLangThrowable:", "onError", "V", 0x0, NULL },
    { "onResultWithId:", "onResult", "V", 0x0, NULL },
    { "onProgressWithId:", "onProgress", "V", 0x0, NULL },
    { "onTimeout", NULL, "V", 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "callbacks_", NULL, 0x2, "Ljava.util.LinkedList;", NULL,  },
    { "askImpl_", NULL, 0x2, "Lcom.droidkit.actors.tasks.ActorAskImpl;", NULL,  },
    { "reqId_", NULL, 0x2, "I", NULL,  },
    { "isCompleted__", "isCompleted", 0x2, "Z", NULL,  },
    { "isCanceled__", "isCanceled", 0x2, "Z", NULL,  },
    { "isError__", "isError", 0x2, "Z", NULL,  },
    { "result__", "result", 0x2, "TT;", NULL,  },
    { "error__", "error", 0x2, "Ljava.lang.Throwable;", NULL,  },
  };
  static const J2ObjcClassInfo _ComDroidkitActorsTasksAskFuture = { 1, "AskFuture", "com.droidkit.actors.tasks", NULL, 0x1, 13, methods, 8, fields, 0, NULL};
  return &_ComDroidkitActorsTasksAskFuture;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComDroidkitActorsTasksAskFuture)

//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/actor-ios/build/java/com/droidkit/actors/tasks/ActorAskImpl.java
//

#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "com/droidkit/actors/ActorRef.h"
#include "com/droidkit/actors/messages/DeadLetter.h"
#include "com/droidkit/actors/tasks/ActorAskImpl.h"
#include "com/droidkit/actors/tasks/AskCallback.h"
#include "com/droidkit/actors/tasks/AskFuture.h"
#include "com/droidkit/actors/tasks/messages/TaskCancel.h"
#include "com/droidkit/actors/tasks/messages/TaskError.h"
#include "com/droidkit/actors/tasks/messages/TaskProgress.h"
#include "com/droidkit/actors/tasks/messages/TaskRequest.h"
#include "com/droidkit/actors/tasks/messages/TaskResult.h"
#include "com/droidkit/actors/tasks/messages/TaskTimeout.h"
#include "java/lang/Integer.h"
#include "java/lang/Throwable.h"
#include "java/util/Collection.h"
#include "java/util/HashMap.h"

__attribute__((unused)) static jboolean ComDroidkitActorsTasksActorAskImpl_onTaskResultWithComDroidkitActorsTasksMessagesTaskResult_(ComDroidkitActorsTasksActorAskImpl *self, ComDroidkitActorsTasksMessagesTaskResult *result);
__attribute__((unused)) static jboolean ComDroidkitActorsTasksActorAskImpl_onTaskProgressWithComDroidkitActorsTasksMessagesTaskProgress_(ComDroidkitActorsTasksActorAskImpl *self, ComDroidkitActorsTasksMessagesTaskProgress *progress);
__attribute__((unused)) static jboolean ComDroidkitActorsTasksActorAskImpl_onTaskErrorWithComDroidkitActorsTasksMessagesTaskError_(ComDroidkitActorsTasksActorAskImpl *self, ComDroidkitActorsTasksMessagesTaskError *error);
__attribute__((unused)) static jboolean ComDroidkitActorsTasksActorAskImpl_onTaskTimeoutWithComDroidkitActorsTasksMessagesTaskTimeout_(ComDroidkitActorsTasksActorAskImpl *self, ComDroidkitActorsTasksMessagesTaskTimeout *taskTimeout);
__attribute__((unused)) static jboolean ComDroidkitActorsTasksActorAskImpl_onDeadLetterWithComDroidkitActorsMessagesDeadLetter_(ComDroidkitActorsTasksActorAskImpl *self, ComDroidkitActorsMessagesDeadLetter *letter);

@interface ComDroidkitActorsTasksActorAskImpl () {
 @public
  JavaUtilHashMap *asks_;
  jint nextReqId_;
  DAActorRef *self__;
}

- (jboolean)onTaskResultWithComDroidkitActorsTasksMessagesTaskResult:(ComDroidkitActorsTasksMessagesTaskResult *)result;

- (jboolean)onTaskProgressWithComDroidkitActorsTasksMessagesTaskProgress:(ComDroidkitActorsTasksMessagesTaskProgress *)progress;

- (jboolean)onTaskErrorWithComDroidkitActorsTasksMessagesTaskError:(ComDroidkitActorsTasksMessagesTaskError *)error;

- (jboolean)onTaskTimeoutWithComDroidkitActorsTasksMessagesTaskTimeout:(ComDroidkitActorsTasksMessagesTaskTimeout *)taskTimeout;

- (jboolean)onDeadLetterWithComDroidkitActorsMessagesDeadLetter:(ComDroidkitActorsMessagesDeadLetter *)letter;
@end

J2OBJC_FIELD_SETTER(ComDroidkitActorsTasksActorAskImpl, asks_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(ComDroidkitActorsTasksActorAskImpl, self__, DAActorRef *)

@interface ComDroidkitActorsTasksActorAskImpl_AskContainer ()
- (instancetype)initWithComDroidkitActorsTasksActorAskImpl:(ComDroidkitActorsTasksActorAskImpl *)outer$
                       withComDroidkitActorsTasksAskFuture:(ComDroidkitActorsTasksAskFuture *)future
                                            withDAActorRef:(DAActorRef *)ref
                                                   withInt:(jint)requestId;
@end

@interface ComDroidkitActorsTasksActorAskImpl_$1 () {
 @public
  ComDroidkitActorsTasksActorAskImpl_CombineContainer *val$container_;
  jint val$index_;
  ComDroidkitActorsTasksAskFuture *val$resultFuture_;
}
@end

J2OBJC_FIELD_SETTER(ComDroidkitActorsTasksActorAskImpl_$1, val$container_, ComDroidkitActorsTasksActorAskImpl_CombineContainer *)
J2OBJC_FIELD_SETTER(ComDroidkitActorsTasksActorAskImpl_$1, val$resultFuture_, ComDroidkitActorsTasksAskFuture *)

@implementation ComDroidkitActorsTasksActorAskImpl

- (instancetype)initWithDAActorRef:(DAActorRef *)self_ {
  if (self = [super init]) {
    ComDroidkitActorsTasksActorAskImpl_setAndConsume_asks_(self, [[JavaUtilHashMap alloc] init]);
    nextReqId_ = 1;
    ComDroidkitActorsTasksActorAskImpl_set_self__(self, self_);
  }
  return self;
}

- (ComDroidkitActorsTasksAskFuture *)combineWithComDroidkitActorsTasksAskFutureArray:(IOSObjectArray *)futures {
  ComDroidkitActorsTasksAskFuture *resultFuture = [[[ComDroidkitActorsTasksAskFuture alloc] initWithComDroidkitActorsTasksActorAskImpl:self withInt:0] autorelease];
  ComDroidkitActorsTasksActorAskImpl_CombineContainer *container = [[[ComDroidkitActorsTasksActorAskImpl_CombineContainer alloc] initWithComDroidkitActorsTasksActorAskImpl:self withInt:((IOSObjectArray *) nil_chk(futures))->size_] autorelease];
  for (jint i = 0; i < futures->size_; i++) {
    jint index = i;
    IOSObjectArray_Set(nil_chk(container->futures_), index, IOSObjectArray_Get(futures, index));
    IOSObjectArray_SetAndConsume(nil_chk(container->callbacks_), index, [[ComDroidkitActorsTasksActorAskImpl_$1 alloc] initWithComDroidkitActorsTasksActorAskImpl_CombineContainer:container withInt:index withComDroidkitActorsTasksAskFuture:resultFuture]);
    [((ComDroidkitActorsTasksAskFuture *) nil_chk(IOSObjectArray_Get(container->futures_, index))) addListenerWithComDroidkitActorsTasksAskCallback:IOSObjectArray_Get(container->callbacks_, index)];
  }
  return resultFuture;
}

- (ComDroidkitActorsTasksAskFuture *)askWithDAActorRef:(DAActorRef *)ref
                                              withLong:(jlong)timeout
                 withComDroidkitActorsTasksAskCallback:(id<ComDroidkitActorsTasksAskCallback>)callback {
  jint reqId = nextReqId_++;
  ComDroidkitActorsTasksAskFuture *future = [[[ComDroidkitActorsTasksAskFuture alloc] initWithComDroidkitActorsTasksActorAskImpl:self withInt:reqId] autorelease];
  if (callback != nil) {
    [future addListenerWithComDroidkitActorsTasksAskCallback:callback];
  }
  ComDroidkitActorsTasksActorAskImpl_AskContainer *container = [[[ComDroidkitActorsTasksActorAskImpl_AskContainer alloc] initWithComDroidkitActorsTasksActorAskImpl:self withComDroidkitActorsTasksAskFuture:future withDAActorRef:ref withInt:reqId] autorelease];
  [((JavaUtilHashMap *) nil_chk(asks_)) putWithId:JavaLangInteger_valueOfWithInt_(reqId) withId:container];
  [((DAActorRef *) nil_chk(ref)) sendWithId:[[[ComDroidkitActorsTasksMessagesTaskRequest alloc] initWithInt:reqId] autorelease] withDAActorRef:self__];
  if (timeout > 0) {
    [((DAActorRef *) nil_chk(self__)) sendWithId:[[[ComDroidkitActorsTasksMessagesTaskTimeout alloc] initWithInt:reqId] autorelease] withLong:timeout];
  }
  return future;
}

- (void)preStart {
}

- (jboolean)onReceiveWithId:(id)message {
  if ([message isKindOfClass:[ComDroidkitActorsMessagesDeadLetter class]]) {
    if (ComDroidkitActorsTasksActorAskImpl_onDeadLetterWithComDroidkitActorsMessagesDeadLetter_(self, (ComDroidkitActorsMessagesDeadLetter *) check_class_cast(message, [ComDroidkitActorsMessagesDeadLetter class]))) {
      return YES;
    }
  }
  else if ([message isKindOfClass:[ComDroidkitActorsTasksMessagesTaskResult class]]) {
    if (ComDroidkitActorsTasksActorAskImpl_onTaskResultWithComDroidkitActorsTasksMessagesTaskResult_(self, (ComDroidkitActorsTasksMessagesTaskResult *) check_class_cast(message, [ComDroidkitActorsTasksMessagesTaskResult class]))) {
      return YES;
    }
  }
  else if ([message isKindOfClass:[ComDroidkitActorsTasksMessagesTaskTimeout class]]) {
    if (ComDroidkitActorsTasksActorAskImpl_onTaskTimeoutWithComDroidkitActorsTasksMessagesTaskTimeout_(self, (ComDroidkitActorsTasksMessagesTaskTimeout *) check_class_cast(message, [ComDroidkitActorsTasksMessagesTaskTimeout class]))) {
      return YES;
    }
  }
  else if ([message isKindOfClass:[ComDroidkitActorsTasksMessagesTaskError class]]) {
    if (ComDroidkitActorsTasksActorAskImpl_onTaskErrorWithComDroidkitActorsTasksMessagesTaskError_(self, (ComDroidkitActorsTasksMessagesTaskError *) check_class_cast(message, [ComDroidkitActorsTasksMessagesTaskError class]))) {
      return YES;
    }
  }
  else if ([message isKindOfClass:[ComDroidkitActorsTasksMessagesTaskProgress class]]) {
    if (ComDroidkitActorsTasksActorAskImpl_onTaskProgressWithComDroidkitActorsTasksMessagesTaskProgress_(self, (ComDroidkitActorsTasksMessagesTaskProgress *) check_class_cast(message, [ComDroidkitActorsTasksMessagesTaskProgress class]))) {
      return YES;
    }
  }
  return NO;
}

- (void)postStop {
  {
    IOSObjectArray *a__ = [((id<JavaUtilCollection>) nil_chk([((JavaUtilHashMap *) nil_chk(asks_)) values])) toArrayWithNSObjectArray:[IOSObjectArray arrayWithLength:0 type:ComDroidkitActorsTasksActorAskImpl_AskContainer_class_()]];
    ComDroidkitActorsTasksActorAskImpl_AskContainer * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    ComDroidkitActorsTasksActorAskImpl_AskContainer * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      ComDroidkitActorsTasksActorAskImpl_AskContainer *container = *b__++;
      [((ComDroidkitActorsTasksAskFuture *) nil_chk(((ComDroidkitActorsTasksActorAskImpl_AskContainer *) nil_chk(container))->future_)) cancel];
    }
  }
}

- (jboolean)onTaskResultWithComDroidkitActorsTasksMessagesTaskResult:(ComDroidkitActorsTasksMessagesTaskResult *)result {
  return ComDroidkitActorsTasksActorAskImpl_onTaskResultWithComDroidkitActorsTasksMessagesTaskResult_(self, result);
}

- (jboolean)onTaskProgressWithComDroidkitActorsTasksMessagesTaskProgress:(ComDroidkitActorsTasksMessagesTaskProgress *)progress {
  return ComDroidkitActorsTasksActorAskImpl_onTaskProgressWithComDroidkitActorsTasksMessagesTaskProgress_(self, progress);
}

- (jboolean)onTaskErrorWithComDroidkitActorsTasksMessagesTaskError:(ComDroidkitActorsTasksMessagesTaskError *)error {
  return ComDroidkitActorsTasksActorAskImpl_onTaskErrorWithComDroidkitActorsTasksMessagesTaskError_(self, error);
}

- (jboolean)onTaskTimeoutWithComDroidkitActorsTasksMessagesTaskTimeout:(ComDroidkitActorsTasksMessagesTaskTimeout *)taskTimeout {
  return ComDroidkitActorsTasksActorAskImpl_onTaskTimeoutWithComDroidkitActorsTasksMessagesTaskTimeout_(self, taskTimeout);
}

- (jboolean)onTaskCancelledWithInt:(jint)reqId {
  ComDroidkitActorsTasksActorAskImpl_AskContainer *container = [((JavaUtilHashMap *) nil_chk(asks_)) removeWithId:JavaLangInteger_valueOfWithInt_(reqId)];
  if (container != nil) {
    [((DAActorRef *) nil_chk(container->ref_)) sendWithId:[[[ComDroidkitActorsTasksMessagesTaskCancel alloc] initWithInt:reqId] autorelease] withDAActorRef:self__];
    return YES;
  }
  return NO;
}

- (jboolean)onDeadLetterWithComDroidkitActorsMessagesDeadLetter:(ComDroidkitActorsMessagesDeadLetter *)letter {
  return ComDroidkitActorsTasksActorAskImpl_onDeadLetterWithComDroidkitActorsMessagesDeadLetter_(self, letter);
}

- (void)dealloc {
  RELEASE_(asks_);
  RELEASE_(self__);
  [super dealloc];
}

- (void)copyAllFieldsTo:(ComDroidkitActorsTasksActorAskImpl *)other {
  [super copyAllFieldsTo:other];
  ComDroidkitActorsTasksActorAskImpl_set_asks_(other, asks_);
  other->nextReqId_ = nextReqId_;
  ComDroidkitActorsTasksActorAskImpl_set_self__(other, self__);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithDAActorRef:", "ActorAskImpl", NULL, 0x1, NULL },
    { "combineWithComDroidkitActorsTasksAskFutureArray:", "combine", "Lcom.droidkit.actors.tasks.AskFuture;", 0x81, NULL },
    { "askWithDAActorRef:withLong:withComDroidkitActorsTasksAskCallback:", "ask", "Lcom.droidkit.actors.tasks.AskFuture;", 0x1, NULL },
    { "preStart", NULL, "V", 0x1, NULL },
    { "onReceiveWithId:", "onReceive", "Z", 0x1, NULL },
    { "postStop", NULL, "V", 0x1, NULL },
    { "onTaskResultWithComDroidkitActorsTasksMessagesTaskResult:", "onTaskResult", "Z", 0x2, NULL },
    { "onTaskProgressWithComDroidkitActorsTasksMessagesTaskProgress:", "onTaskProgress", "Z", 0x2, NULL },
    { "onTaskErrorWithComDroidkitActorsTasksMessagesTaskError:", "onTaskError", "Z", 0x2, NULL },
    { "onTaskTimeoutWithComDroidkitActorsTasksMessagesTaskTimeout:", "onTaskTimeout", "Z", 0x2, NULL },
    { "onTaskCancelledWithInt:", "onTaskCancelled", "Z", 0x1, NULL },
    { "onDeadLetterWithComDroidkitActorsMessagesDeadLetter:", "onDeadLetter", "Z", 0x2, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "asks_", NULL, 0x2, "Ljava.util.HashMap;", NULL,  },
    { "nextReqId_", NULL, 0x2, "I", NULL,  },
    { "self__", "self", 0x2, "Lcom.droidkit.actors.ActorRef;", NULL,  },
  };
  static const J2ObjcClassInfo _ComDroidkitActorsTasksActorAskImpl = { 1, "ActorAskImpl", "com.droidkit.actors.tasks", NULL, 0x1, 12, methods, 3, fields, 0, NULL};
  return &_ComDroidkitActorsTasksActorAskImpl;
}

@end

jboolean ComDroidkitActorsTasksActorAskImpl_onTaskResultWithComDroidkitActorsTasksMessagesTaskResult_(ComDroidkitActorsTasksActorAskImpl *self, ComDroidkitActorsTasksMessagesTaskResult *result) {
  ComDroidkitActorsTasksActorAskImpl_AskContainer *container = [((JavaUtilHashMap *) nil_chk(self->asks_)) removeWithId:JavaLangInteger_valueOfWithInt_([((ComDroidkitActorsTasksMessagesTaskResult *) nil_chk(result)) getRequestId])];
  if (container != nil) {
    [((ComDroidkitActorsTasksAskFuture *) nil_chk(container->future_)) onResultWithId:[result getRes]];
    return YES;
  }
  return NO;
}

jboolean ComDroidkitActorsTasksActorAskImpl_onTaskProgressWithComDroidkitActorsTasksMessagesTaskProgress_(ComDroidkitActorsTasksActorAskImpl *self, ComDroidkitActorsTasksMessagesTaskProgress *progress) {
  ComDroidkitActorsTasksActorAskImpl_AskContainer *container = [((JavaUtilHashMap *) nil_chk(self->asks_)) getWithId:JavaLangInteger_valueOfWithInt_([((ComDroidkitActorsTasksMessagesTaskProgress *) nil_chk(progress)) getRequestId])];
  if (container != nil) {
    [((ComDroidkitActorsTasksAskFuture *) nil_chk(container->future_)) onProgressWithId:[progress getProgress]];
    return YES;
  }
  return NO;
}

jboolean ComDroidkitActorsTasksActorAskImpl_onTaskErrorWithComDroidkitActorsTasksMessagesTaskError_(ComDroidkitActorsTasksActorAskImpl *self, ComDroidkitActorsTasksMessagesTaskError *error) {
  ComDroidkitActorsTasksActorAskImpl_AskContainer *container = [((JavaUtilHashMap *) nil_chk(self->asks_)) removeWithId:JavaLangInteger_valueOfWithInt_([((ComDroidkitActorsTasksMessagesTaskError *) nil_chk(error)) getRequestId])];
  if (container != nil) {
    [((ComDroidkitActorsTasksAskFuture *) nil_chk(container->future_)) onErrorWithJavaLangThrowable:[error getThrowable]];
    return YES;
  }
  return NO;
}

jboolean ComDroidkitActorsTasksActorAskImpl_onTaskTimeoutWithComDroidkitActorsTasksMessagesTaskTimeout_(ComDroidkitActorsTasksActorAskImpl *self, ComDroidkitActorsTasksMessagesTaskTimeout *taskTimeout) {
  ComDroidkitActorsTasksActorAskImpl_AskContainer *container = [((JavaUtilHashMap *) nil_chk(self->asks_)) removeWithId:JavaLangInteger_valueOfWithInt_([((ComDroidkitActorsTasksMessagesTaskTimeout *) nil_chk(taskTimeout)) getRequestId])];
  if (container != nil) {
    [((ComDroidkitActorsTasksAskFuture *) nil_chk(container->future_)) onTimeout];
    return YES;
  }
  return NO;
}

jboolean ComDroidkitActorsTasksActorAskImpl_onDeadLetterWithComDroidkitActorsMessagesDeadLetter_(ComDroidkitActorsTasksActorAskImpl *self, ComDroidkitActorsMessagesDeadLetter *letter) {
  if ([[((ComDroidkitActorsMessagesDeadLetter *) nil_chk(letter)) getMessage] isKindOfClass:[ComDroidkitActorsTasksMessagesTaskRequest class]]) {
    ComDroidkitActorsTasksMessagesTaskRequest *request = (ComDroidkitActorsTasksMessagesTaskRequest *) check_class_cast([letter getMessage], [ComDroidkitActorsTasksMessagesTaskRequest class]);
    ComDroidkitActorsTasksActorAskImpl_AskContainer *container = [((JavaUtilHashMap *) nil_chk(self->asks_)) getWithId:JavaLangInteger_valueOfWithInt_([((ComDroidkitActorsTasksMessagesTaskRequest *) nil_chk(request)) getRequestId])];
    if (container != nil) {
      [((DAActorRef *) nil_chk(container->ref_)) sendWithId:request withDAActorRef:self->self__];
      return YES;
    }
  }
  return NO;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComDroidkitActorsTasksActorAskImpl)

@implementation ComDroidkitActorsTasksActorAskImpl_AskContainer

- (instancetype)initWithComDroidkitActorsTasksActorAskImpl:(ComDroidkitActorsTasksActorAskImpl *)outer$
                       withComDroidkitActorsTasksAskFuture:(ComDroidkitActorsTasksAskFuture *)future
                                            withDAActorRef:(DAActorRef *)ref
                                                   withInt:(jint)requestId {
  if (self = [super init]) {
    ComDroidkitActorsTasksActorAskImpl_AskContainer_set_future_(self, future);
    ComDroidkitActorsTasksActorAskImpl_AskContainer_set_ref_(self, ref);
    self->requestId_ = requestId;
  }
  return self;
}

- (void)dealloc {
  RELEASE_(future_);
  RELEASE_(ref_);
  [super dealloc];
}

- (void)copyAllFieldsTo:(ComDroidkitActorsTasksActorAskImpl_AskContainer *)other {
  [super copyAllFieldsTo:other];
  ComDroidkitActorsTasksActorAskImpl_AskContainer_set_future_(other, future_);
  ComDroidkitActorsTasksActorAskImpl_AskContainer_set_ref_(other, ref_);
  other->requestId_ = requestId_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithComDroidkitActorsTasksActorAskImpl:withComDroidkitActorsTasksAskFuture:withDAActorRef:withInt:", "AskContainer", NULL, 0x2, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "future_", NULL, 0x11, "Lcom.droidkit.actors.tasks.AskFuture;", NULL,  },
    { "ref_", NULL, 0x11, "Lcom.droidkit.actors.ActorRef;", NULL,  },
    { "requestId_", NULL, 0x11, "I", NULL,  },
  };
  static const J2ObjcClassInfo _ComDroidkitActorsTasksActorAskImpl_AskContainer = { 1, "AskContainer", "com.droidkit.actors.tasks", "ActorAskImpl", 0x2, 1, methods, 3, fields, 0, NULL};
  return &_ComDroidkitActorsTasksActorAskImpl_AskContainer;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComDroidkitActorsTasksActorAskImpl_AskContainer)

@implementation ComDroidkitActorsTasksActorAskImpl_CombineContainer

- (instancetype)initWithComDroidkitActorsTasksActorAskImpl:(ComDroidkitActorsTasksActorAskImpl *)outer$
                                                   withInt:(jint)count {
  if (self = [super init]) {
    isCompleted_ = NO;
    ComDroidkitActorsTasksActorAskImpl_CombineContainer_setAndConsume_results_(self, [IOSObjectArray newArrayWithLength:count type:NSObject_class_()]);
    ComDroidkitActorsTasksActorAskImpl_CombineContainer_setAndConsume_completed_(self, [IOSBooleanArray newArrayWithLength:count]);
    ComDroidkitActorsTasksActorAskImpl_CombineContainer_setAndConsume_callbacks_(self, [IOSObjectArray newArrayWithLength:count type:ComDroidkitActorsTasksAskCallback_class_()]);
    ComDroidkitActorsTasksActorAskImpl_CombineContainer_setAndConsume_futures_(self, [IOSObjectArray newArrayWithLength:count type:ComDroidkitActorsTasksAskFuture_class_()]);
  }
  return self;
}

- (void)dealloc {
  RELEASE_(results_);
  RELEASE_(completed_);
  RELEASE_(futures_);
  RELEASE_(callbacks_);
  [super dealloc];
}

- (void)copyAllFieldsTo:(ComDroidkitActorsTasksActorAskImpl_CombineContainer *)other {
  [super copyAllFieldsTo:other];
  other->isCompleted_ = isCompleted_;
  ComDroidkitActorsTasksActorAskImpl_CombineContainer_set_results_(other, results_);
  ComDroidkitActorsTasksActorAskImpl_CombineContainer_set_completed_(other, completed_);
  ComDroidkitActorsTasksActorAskImpl_CombineContainer_set_futures_(other, futures_);
  ComDroidkitActorsTasksActorAskImpl_CombineContainer_set_callbacks_(other, callbacks_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithComDroidkitActorsTasksActorAskImpl:withInt:", "CombineContainer", NULL, 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "isCompleted_", NULL, 0x1, "Z", NULL,  },
    { "results_", NULL, 0x1, "[Ljava.lang.Object;", NULL,  },
    { "completed_", NULL, 0x1, "[Z", NULL,  },
    { "futures_", NULL, 0x1, "[Lcom.droidkit.actors.tasks.AskFuture;", NULL,  },
    { "callbacks_", NULL, 0x1, "[Lcom.droidkit.actors.tasks.AskCallback;", NULL,  },
  };
  static const J2ObjcClassInfo _ComDroidkitActorsTasksActorAskImpl_CombineContainer = { 1, "CombineContainer", "com.droidkit.actors.tasks", "ActorAskImpl", 0x2, 1, methods, 5, fields, 0, NULL};
  return &_ComDroidkitActorsTasksActorAskImpl_CombineContainer;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComDroidkitActorsTasksActorAskImpl_CombineContainer)

@implementation ComDroidkitActorsTasksActorAskImpl_$1

- (void)onResultWithId:(id)result {
  *IOSBooleanArray_GetRef(nil_chk(((ComDroidkitActorsTasksActorAskImpl_CombineContainer *) nil_chk(val$container_))->completed_), val$index_) = YES;
  IOSObjectArray_Set(nil_chk(val$container_->results_), val$index_, result);
  jboolean isCompleted = YES;
  {
    IOSBooleanArray *a__ = val$container_->completed_;
    jboolean const *b__ = a__->buffer_;
    jboolean const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      jboolean c = *b__++;
      if (!c) {
        isCompleted = NO;
        break;
      }
    }
  }
  if (isCompleted && !val$container_->isCompleted_) {
    val$container_->isCompleted_ = YES;
    for (jint i = 0; i < ((IOSObjectArray *) nil_chk(val$container_->futures_))->size_; i++) {
      [((ComDroidkitActorsTasksAskFuture *) nil_chk(IOSObjectArray_Get(val$container_->futures_, i))) removeListenerWithComDroidkitActorsTasksAskCallback:IOSObjectArray_Get(nil_chk(val$container_->callbacks_), i)];
    }
    [((ComDroidkitActorsTasksAskFuture *) nil_chk(val$resultFuture_)) onResultWithId:val$container_->results_];
  }
}

- (void)onErrorWithJavaLangThrowable:(JavaLangThrowable *)throwable {
  if (!((ComDroidkitActorsTasksActorAskImpl_CombineContainer *) nil_chk(val$container_))->isCompleted_) {
    val$container_->isCompleted_ = YES;
    for (jint i = 0; i < ((IOSObjectArray *) nil_chk(val$container_->futures_))->size_; i++) {
      [((ComDroidkitActorsTasksAskFuture *) nil_chk(IOSObjectArray_Get(val$container_->futures_, i))) removeListenerWithComDroidkitActorsTasksAskCallback:IOSObjectArray_Get(nil_chk(val$container_->callbacks_), i)];
      [((ComDroidkitActorsTasksAskFuture *) nil_chk(IOSObjectArray_Get(val$container_->futures_, i))) cancel];
    }
    [((ComDroidkitActorsTasksAskFuture *) nil_chk(val$resultFuture_)) onErrorWithJavaLangThrowable:throwable];
  }
}

- (instancetype)initWithComDroidkitActorsTasksActorAskImpl_CombineContainer:(ComDroidkitActorsTasksActorAskImpl_CombineContainer *)capture$0
                                                                    withInt:(jint)capture$1
                                        withComDroidkitActorsTasksAskFuture:(ComDroidkitActorsTasksAskFuture *)capture$2 {
  ComDroidkitActorsTasksActorAskImpl_$1_set_val$container_(self, capture$0);
  val$index_ = capture$1;
  ComDroidkitActorsTasksActorAskImpl_$1_set_val$resultFuture_(self, capture$2);
  return [super init];
}

- (void)dealloc {
  RELEASE_(val$container_);
  RELEASE_(val$resultFuture_);
  [super dealloc];
}

- (void)copyAllFieldsTo:(ComDroidkitActorsTasksActorAskImpl_$1 *)other {
  [super copyAllFieldsTo:other];
  ComDroidkitActorsTasksActorAskImpl_$1_set_val$container_(other, val$container_);
  other->val$index_ = val$index_;
  ComDroidkitActorsTasksActorAskImpl_$1_set_val$resultFuture_(other, val$resultFuture_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "onResultWithId:", "onResult", "V", 0x1, NULL },
    { "onErrorWithJavaLangThrowable:", "onError", "V", 0x1, NULL },
    { "initWithComDroidkitActorsTasksActorAskImpl_CombineContainer:withInt:withComDroidkitActorsTasksAskFuture:", "init", NULL, 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$container_", NULL, 0x1012, "Lcom.droidkit.actors.tasks.ActorAskImpl$CombineContainer;", NULL,  },
    { "val$index_", NULL, 0x1012, "I", NULL,  },
    { "val$resultFuture_", NULL, 0x1012, "Lcom.droidkit.actors.tasks.AskFuture;", NULL,  },
  };
  static const J2ObjcClassInfo _ComDroidkitActorsTasksActorAskImpl_$1 = { 1, "$1", "com.droidkit.actors.tasks", "ActorAskImpl", 0x8000, 3, methods, 3, fields, 0, NULL};
  return &_ComDroidkitActorsTasksActorAskImpl_$1;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComDroidkitActorsTasksActorAskImpl_$1)

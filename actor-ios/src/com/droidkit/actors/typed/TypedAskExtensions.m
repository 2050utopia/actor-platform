//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/actor-ios/build/java/com/droidkit/actors/typed/TypedAskExtensions.java
//

#include "J2ObjC_source.h"
#include "com/droidkit/actors/ActorRef.h"
#include "com/droidkit/actors/concurrency/Future.h"
#include "com/droidkit/actors/concurrency/FutureCallback.h"
#include "com/droidkit/actors/typed/TypedAskExtensions.h"
#include "com/droidkit/actors/typed/messages/TypedFutureError.h"
#include "com/droidkit/actors/typed/messages/TypedFutureResult.h"
#include "java/lang/Integer.h"
#include "java/lang/Throwable.h"
#include "java/util/HashMap.h"
#include "java/util/concurrent/atomic/AtomicInteger.h"

@interface ComDroidkitActorsTypedTypedAskExtensions () {
 @public
  JavaUtilHashMap *containers_;
  DAActorRef *self__;
  JavaUtilConcurrentAtomicAtomicInteger *askId_;
}
@end

J2OBJC_FIELD_SETTER(ComDroidkitActorsTypedTypedAskExtensions, containers_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(ComDroidkitActorsTypedTypedAskExtensions, self__, DAActorRef *)
J2OBJC_FIELD_SETTER(ComDroidkitActorsTypedTypedAskExtensions, askId_, JavaUtilConcurrentAtomicAtomicInteger *)

@interface ComDroidkitActorsTypedTypedAskExtensions_AskContainer () {
 @public
  jint id__;
  ComDroidkitActorsConcurrencyFuture *future_;
  id<ComDroidkitActorsConcurrencyFutureCallback> callback_;
}
- (instancetype)initWithComDroidkitActorsTypedTypedAskExtensions:(ComDroidkitActorsTypedTypedAskExtensions *)outer$
                                                         withInt:(jint)id_
                          withComDroidkitActorsConcurrencyFuture:(ComDroidkitActorsConcurrencyFuture *)future
                  withComDroidkitActorsConcurrencyFutureCallback:(id<ComDroidkitActorsConcurrencyFutureCallback>)callback;
@end

J2OBJC_FIELD_SETTER(ComDroidkitActorsTypedTypedAskExtensions_AskContainer, future_, ComDroidkitActorsConcurrencyFuture *)
J2OBJC_FIELD_SETTER(ComDroidkitActorsTypedTypedAskExtensions_AskContainer, callback_, id<ComDroidkitActorsConcurrencyFutureCallback>)

@interface ComDroidkitActorsTypedTypedAskExtensions_$1 () {
 @public
  ComDroidkitActorsTypedTypedAskExtensions *this$0_;
  jint val$id_;
}
@end

J2OBJC_FIELD_SETTER(ComDroidkitActorsTypedTypedAskExtensions_$1, this$0_, ComDroidkitActorsTypedTypedAskExtensions *)

@implementation ComDroidkitActorsTypedTypedAskExtensions

- (instancetype)initWithDAActorRef:(DAActorRef *)self_ {
  if (self = [super init]) {
    ComDroidkitActorsTypedTypedAskExtensions_setAndConsume_containers_(self, [[JavaUtilHashMap alloc] init]);
    ComDroidkitActorsTypedTypedAskExtensions_setAndConsume_askId_(self, [[JavaUtilConcurrentAtomicAtomicInteger alloc] init]);
    ComDroidkitActorsTypedTypedAskExtensions_set_self__(self, self_);
  }
  return self;
}

- (void)preStart {
}

- (jboolean)onReceiveWithId:(id)message {
  if ([message isKindOfClass:[ComDroidkitActorsTypedMessagesTypedFutureResult class]]) {
    ComDroidkitActorsTypedMessagesTypedFutureResult *futureResult = (ComDroidkitActorsTypedMessagesTypedFutureResult *) check_class_cast(message, [ComDroidkitActorsTypedMessagesTypedFutureResult class]);
    ComDroidkitActorsTypedTypedAskExtensions_AskContainer *container = [((JavaUtilHashMap *) nil_chk(containers_)) removeWithId:JavaLangInteger_valueOfWithInt_([((ComDroidkitActorsTypedMessagesTypedFutureResult *) nil_chk(futureResult)) getId])];
    if (container != nil) {
      if (container->callback_ != nil) {
        [container->callback_ onResultWithId:[futureResult getRes]];
      }
    }
    return YES;
  }
  else if ([message isKindOfClass:[ComDroidkitActorsTypedMessagesTypedFutureError class]]) {
    ComDroidkitActorsTypedMessagesTypedFutureError *futureError = (ComDroidkitActorsTypedMessagesTypedFutureError *) check_class_cast(message, [ComDroidkitActorsTypedMessagesTypedFutureError class]);
    ComDroidkitActorsTypedTypedAskExtensions_AskContainer *container = [((JavaUtilHashMap *) nil_chk(containers_)) removeWithId:JavaLangInteger_valueOfWithInt_([((ComDroidkitActorsTypedMessagesTypedFutureError *) nil_chk(futureError)) getId])];
    if (container != nil) {
      if (container->callback_ != nil) {
        [container->callback_ onErrorWithJavaLangThrowable:[futureError getT]];
      }
    }
    return YES;
  }
  return NO;
}

- (void)postStop {
}

- (void)askWithComDroidkitActorsConcurrencyFuture:(ComDroidkitActorsConcurrencyFuture *)future
   withComDroidkitActorsConcurrencyFutureCallback:(id<ComDroidkitActorsConcurrencyFutureCallback>)callback {
  jint id_ = [((JavaUtilConcurrentAtomicAtomicInteger *) nil_chk(askId_)) incrementAndGet];
  [((ComDroidkitActorsConcurrencyFuture *) nil_chk(future)) addListenerWithComDroidkitActorsConcurrencyFutureCallback:[[[ComDroidkitActorsTypedTypedAskExtensions_$1 alloc] initWithComDroidkitActorsTypedTypedAskExtensions:self withInt:id_] autorelease]];
  [((JavaUtilHashMap *) nil_chk(containers_)) putWithId:JavaLangInteger_valueOfWithInt_(id_) withId:[[[ComDroidkitActorsTypedTypedAskExtensions_AskContainer alloc] initWithComDroidkitActorsTypedTypedAskExtensions:self withInt:id_ withComDroidkitActorsConcurrencyFuture:future withComDroidkitActorsConcurrencyFutureCallback:callback] autorelease]];
}

- (void)dealloc {
  RELEASE_(containers_);
  RELEASE_(self__);
  RELEASE_(askId_);
  [super dealloc];
}

- (void)copyAllFieldsTo:(ComDroidkitActorsTypedTypedAskExtensions *)other {
  [super copyAllFieldsTo:other];
  ComDroidkitActorsTypedTypedAskExtensions_set_containers_(other, containers_);
  ComDroidkitActorsTypedTypedAskExtensions_set_self__(other, self__);
  ComDroidkitActorsTypedTypedAskExtensions_set_askId_(other, askId_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithDAActorRef:", "TypedAskExtensions", NULL, 0x1, NULL },
    { "preStart", NULL, "V", 0x1, NULL },
    { "onReceiveWithId:", "onReceive", "Z", 0x1, NULL },
    { "postStop", NULL, "V", 0x1, NULL },
    { "askWithComDroidkitActorsConcurrencyFuture:withComDroidkitActorsConcurrencyFutureCallback:", "ask", "V", 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "containers_", NULL, 0x2, "Ljava.util.HashMap;", NULL,  },
    { "self__", "self", 0x2, "Lcom.droidkit.actors.ActorRef;", NULL,  },
    { "askId_", NULL, 0x2, "Ljava.util.concurrent.atomic.AtomicInteger;", NULL,  },
  };
  static const J2ObjcClassInfo _ComDroidkitActorsTypedTypedAskExtensions = { 1, "TypedAskExtensions", "com.droidkit.actors.typed", NULL, 0x1, 5, methods, 3, fields, 0, NULL};
  return &_ComDroidkitActorsTypedTypedAskExtensions;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComDroidkitActorsTypedTypedAskExtensions)

@implementation ComDroidkitActorsTypedTypedAskExtensions_AskContainer

- (instancetype)initWithComDroidkitActorsTypedTypedAskExtensions:(ComDroidkitActorsTypedTypedAskExtensions *)outer$
                                                         withInt:(jint)id_
                          withComDroidkitActorsConcurrencyFuture:(ComDroidkitActorsConcurrencyFuture *)future
                  withComDroidkitActorsConcurrencyFutureCallback:(id<ComDroidkitActorsConcurrencyFutureCallback>)callback {
  if (self = [super init]) {
    self->id__ = id_;
    ComDroidkitActorsTypedTypedAskExtensions_AskContainer_set_future_(self, future);
    ComDroidkitActorsTypedTypedAskExtensions_AskContainer_set_callback_(self, callback);
  }
  return self;
}

- (void)dealloc {
  RELEASE_(future_);
  RELEASE_(callback_);
  [super dealloc];
}

- (void)copyAllFieldsTo:(ComDroidkitActorsTypedTypedAskExtensions_AskContainer *)other {
  [super copyAllFieldsTo:other];
  other->id__ = id__;
  ComDroidkitActorsTypedTypedAskExtensions_AskContainer_set_future_(other, future_);
  ComDroidkitActorsTypedTypedAskExtensions_AskContainer_set_callback_(other, callback_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithComDroidkitActorsTypedTypedAskExtensions:withInt:withComDroidkitActorsConcurrencyFuture:withComDroidkitActorsConcurrencyFutureCallback:", "AskContainer", NULL, 0x2, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "id__", "id", 0x2, "I", NULL,  },
    { "future_", NULL, 0x2, "Lcom.droidkit.actors.concurrency.Future;", NULL,  },
    { "callback_", NULL, 0x2, "Lcom.droidkit.actors.concurrency.FutureCallback;", NULL,  },
  };
  static const J2ObjcClassInfo _ComDroidkitActorsTypedTypedAskExtensions_AskContainer = { 1, "AskContainer", "com.droidkit.actors.typed", "TypedAskExtensions", 0x2, 1, methods, 3, fields, 0, NULL};
  return &_ComDroidkitActorsTypedTypedAskExtensions_AskContainer;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComDroidkitActorsTypedTypedAskExtensions_AskContainer)

@implementation ComDroidkitActorsTypedTypedAskExtensions_$1

- (void)onResultWithId:(id)result {
  [((DAActorRef *) nil_chk(this$0_->self__)) sendWithId:[[[ComDroidkitActorsTypedMessagesTypedFutureResult alloc] initWithInt:val$id_ withId:result] autorelease]];
}

- (void)onErrorWithJavaLangThrowable:(JavaLangThrowable *)throwable {
  [((DAActorRef *) nil_chk(this$0_->self__)) sendWithId:[[[ComDroidkitActorsTypedMessagesTypedFutureError alloc] initWithInt:val$id_ withJavaLangThrowable:throwable] autorelease]];
}

- (instancetype)initWithComDroidkitActorsTypedTypedAskExtensions:(ComDroidkitActorsTypedTypedAskExtensions *)outer$
                                                         withInt:(jint)capture$0 {
  ComDroidkitActorsTypedTypedAskExtensions_$1_set_this$0_(self, outer$);
  val$id_ = capture$0;
  return [super init];
}

- (void)dealloc {
  RELEASE_(this$0_);
  [super dealloc];
}

- (void)copyAllFieldsTo:(ComDroidkitActorsTypedTypedAskExtensions_$1 *)other {
  [super copyAllFieldsTo:other];
  ComDroidkitActorsTypedTypedAskExtensions_$1_set_this$0_(other, this$0_);
  other->val$id_ = val$id_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "onResultWithId:", "onResult", "V", 0x1, NULL },
    { "onErrorWithJavaLangThrowable:", "onError", "V", 0x1, NULL },
    { "initWithComDroidkitActorsTypedTypedAskExtensions:withInt:", "init", NULL, 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.droidkit.actors.typed.TypedAskExtensions;", NULL,  },
    { "val$id_", NULL, 0x1012, "I", NULL,  },
  };
  static const J2ObjcClassInfo _ComDroidkitActorsTypedTypedAskExtensions_$1 = { 1, "$1", "com.droidkit.actors.typed", "TypedAskExtensions", 0x8000, 3, methods, 2, fields, 0, NULL};
  return &_ComDroidkitActorsTypedTypedAskExtensions_$1;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComDroidkitActorsTypedTypedAskExtensions_$1)

//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/actor-ios/build/java/im/actor/model/droidkit/actors/concurrency/Future.java
//

#include "J2ObjC_source.h"
#include "im/actor/model/droidkit/actors/concurrency/Future.h"
#include "im/actor/model/droidkit/actors/concurrency/FutureCallback.h"
#include "im/actor/model/droidkit/actors/concurrency/FutureTimeoutException.h"
#include "java/lang/Throwable.h"
#include "java/util/LinkedList.h"

@interface ImActorModelDroidkitActorsConcurrencyFuture () {
 @public
  JavaUtilLinkedList *callbacks_;
  jboolean isCompleted__;
  jboolean isCanceled__;
  jboolean isError__;
  id result_;
  JavaLangThrowable *error__;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelDroidkitActorsConcurrencyFuture, callbacks_, JavaUtilLinkedList *)
J2OBJC_FIELD_SETTER(ImActorModelDroidkitActorsConcurrencyFuture, result_, id)
J2OBJC_FIELD_SETTER(ImActorModelDroidkitActorsConcurrencyFuture, error__, JavaLangThrowable *)

@implementation ImActorModelDroidkitActorsConcurrencyFuture

- (jboolean)isCompleted {
  @synchronized(self) {
    return isCompleted__;
  }
}

- (jboolean)isError {
  @synchronized(self) {
    return isError__;
  }
}

- (jboolean)isCanceled {
  @synchronized(self) {
    return isCanceled__;
  }
}

- (JavaLangThrowable *)error {
  @synchronized(self) {
    return error__;
  }
}

- (id)get {
  @synchronized(self) {
    return result_;
  }
}

- (jboolean)addListenerWithImActorModelDroidkitActorsConcurrencyFutureCallback:(id<ImActorModelDroidkitActorsConcurrencyFutureCallback>)callback {
  @synchronized(self) {
    [((JavaUtilLinkedList *) nil_chk(callbacks_)) addWithId:callback];
    if (isCompleted__) {
      if (isCanceled__) {
        return YES;
      }
      if (isError__) {
        [((id<ImActorModelDroidkitActorsConcurrencyFutureCallback>) nil_chk(callback)) onErrorWithJavaLangThrowable:error__];
      }
      else {
        [((id<ImActorModelDroidkitActorsConcurrencyFutureCallback>) nil_chk(callback)) onResultWithId:result_];
      }
    }
    return isCompleted__;
  }
}

- (void)removeListenerWithImActorModelDroidkitActorsConcurrencyFutureCallback:(id<ImActorModelDroidkitActorsConcurrencyFutureCallback>)callback {
  @synchronized(self) {
    [((JavaUtilLinkedList *) nil_chk(callbacks_)) removeWithId:callback];
  }
}

- (void)onCancel {
  @synchronized(self) {
    if (isCompleted__) {
      return;
    }
    isCompleted__ = YES;
    isError__ = NO;
    isCanceled__ = YES;
  }
}

- (void)onCompletedWithId:(id)res {
  @synchronized(self) {
    if (isCompleted__) {
      return;
    }
    isCompleted__ = YES;
    isCanceled__ = NO;
    isError__ = NO;
    error__ = nil;
    result_ = res;
    for (id<ImActorModelDroidkitActorsConcurrencyFutureCallback> __strong callback in nil_chk(callbacks_)) {
      [((id<ImActorModelDroidkitActorsConcurrencyFutureCallback>) nil_chk(callback)) onResultWithId:res];
    }
  }
}

- (void)onErrorWithJavaLangThrowable:(JavaLangThrowable *)throwable {
  @synchronized(self) {
    if (isCompleted__) {
      return;
    }
    isCompleted__ = YES;
    isCanceled__ = NO;
    isError__ = YES;
    error__ = throwable;
    result_ = nil;
    for (id<ImActorModelDroidkitActorsConcurrencyFutureCallback> __strong callback in nil_chk(callbacks_)) {
      [((id<ImActorModelDroidkitActorsConcurrencyFutureCallback>) nil_chk(callback)) onErrorWithJavaLangThrowable:throwable];
    }
  }
}

- (void)onTimeout {
  @synchronized(self) {
    [self onErrorWithJavaLangThrowable:[[ImActorModelDroidkitActorsConcurrencyFutureTimeoutException alloc] init]];
  }
}

- (instancetype)init {
  if (self = [super init]) {
    callbacks_ = [[JavaUtilLinkedList alloc] init];
    isCompleted__ = NO;
    isCanceled__ = NO;
    isError__ = NO;
    result_ = nil;
    error__ = nil;
  }
  return self;
}

- (void)copyAllFieldsTo:(ImActorModelDroidkitActorsConcurrencyFuture *)other {
  [super copyAllFieldsTo:other];
  other->callbacks_ = callbacks_;
  other->isCompleted__ = isCompleted__;
  other->isCanceled__ = isCanceled__;
  other->isError__ = isError__;
  other->result_ = result_;
  other->error__ = error__;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "isCompleted", NULL, "Z", 0x21, NULL },
    { "isError", NULL, "Z", 0x21, NULL },
    { "isCanceled", NULL, "Z", 0x21, NULL },
    { "error", NULL, "Ljava.lang.Throwable;", 0x21, NULL },
    { "get", NULL, "TT;", 0x21, NULL },
    { "addListenerWithImActorModelDroidkitActorsConcurrencyFutureCallback:", "addListener", "Z", 0x21, NULL },
    { "removeListenerWithImActorModelDroidkitActorsConcurrencyFutureCallback:", "removeListener", "V", 0x21, NULL },
    { "onCancel", NULL, "V", 0x24, NULL },
    { "onCompletedWithId:", "onCompleted", "V", 0x24, NULL },
    { "onErrorWithJavaLangThrowable:", "onError", "V", 0x24, NULL },
    { "onTimeout", NULL, "V", 0x24, NULL },
    { "init", NULL, NULL, 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "callbacks_", NULL, 0x2, "Ljava.util.LinkedList;", NULL,  },
    { "isCompleted__", "isCompleted", 0x2, "Z", NULL,  },
    { "isCanceled__", "isCanceled", 0x2, "Z", NULL,  },
    { "isError__", "isError", 0x2, "Z", NULL,  },
    { "result_", NULL, 0x2, "TT;", NULL,  },
    { "error__", "error", 0x2, "Ljava.lang.Throwable;", NULL,  },
  };
  static const J2ObjcClassInfo _ImActorModelDroidkitActorsConcurrencyFuture = { 1, "Future", "im.actor.model.droidkit.actors.concurrency", NULL, 0x401, 12, methods, 6, fields, 0, NULL};
  return &_ImActorModelDroidkitActorsConcurrencyFuture;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelDroidkitActorsConcurrencyFuture)

//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/actor-ios/build/java/im/actor/model/droidkit/actors/ActorSystem.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "im/actor/model/droidkit/actors/ActorRef.h"
#include "im/actor/model/droidkit/actors/ActorSelection.h"
#include "im/actor/model/droidkit/actors/ActorSystem.h"
#include "im/actor/model/droidkit/actors/Props.h"
#include "im/actor/model/droidkit/actors/ThreadPriority.h"
#include "im/actor/model/droidkit/actors/conf/EnvConfig.h"
#include "im/actor/model/droidkit/actors/conf/JavaFactory.h"
#include "im/actor/model/droidkit/actors/debug/TraceInterface.h"
#include "im/actor/model/droidkit/actors/mailbox/ActorDispatcher.h"
#include "java/lang/RuntimeException.h"
#include "java/util/HashMap.h"

@interface ImActorModelDroidkitActorsActorSystem () {
 @public
  JavaUtilHashMap *dispatchers_;
  id<ImActorModelDroidkitActorsDebugTraceInterface> traceInterface_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelDroidkitActorsActorSystem, dispatchers_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(ImActorModelDroidkitActorsActorSystem, traceInterface_, id<ImActorModelDroidkitActorsDebugTraceInterface>)

BOOL ImActorModelDroidkitActorsActorSystem_initialized = NO;

@implementation ImActorModelDroidkitActorsActorSystem

ImActorModelDroidkitActorsActorSystem * ImActorModelDroidkitActorsActorSystem_mainSystem_;
NSString * ImActorModelDroidkitActorsActorSystem_DEFAULT_DISPATCHER_ = @"default";

+ (ImActorModelDroidkitActorsActorSystem *)system {
  return ImActorModelDroidkitActorsActorSystem_system();
}

- (instancetype)init {
  return [self initImActorModelDroidkitActorsActorSystemWithBoolean:YES];
}

- (instancetype)initImActorModelDroidkitActorsActorSystemWithBoolean:(jboolean)addDefaultDispatcher {
  if (self = [super init]) {
    ImActorModelDroidkitActorsActorSystem_setAndConsume_dispatchers_(self, [[JavaUtilHashMap alloc] init]);
    if (addDefaultDispatcher) {
      [self addDispatcherWithNSString:ImActorModelDroidkitActorsActorSystem_DEFAULT_DISPATCHER_];
    }
  }
  return self;
}

- (instancetype)initWithBoolean:(jboolean)addDefaultDispatcher {
  return [self initImActorModelDroidkitActorsActorSystemWithBoolean:addDefaultDispatcher];
}

- (void)addDispatcherWithNSString:(NSString *)dispatcherId
                          withInt:(jint)threadsCount {
  @synchronized(dispatchers_) {
    if ([((JavaUtilHashMap *) nil_chk(dispatchers_)) containsKeyWithId:dispatcherId]) {
      return;
    }
    ImActorModelDroidkitActorsMailboxActorDispatcher *dispatcher = ImActorModelDroidkitActorsConfEnvConfig_createDispatcherWithNSString_withInt_withImActorModelDroidkitActorsThreadPriorityEnum_withImActorModelDroidkitActorsActorSystem_(dispatcherId, threadsCount, ImActorModelDroidkitActorsThreadPriorityEnum_get_LOW(), self);
    [dispatchers_ putWithId:dispatcherId withId:dispatcher];
  }
}

- (void)addDispatcherWithNSString:(NSString *)dispatcherId {
  @synchronized(dispatchers_) {
    if ([((JavaUtilHashMap *) nil_chk(dispatchers_)) containsKeyWithId:dispatcherId]) {
      return;
    }
    ImActorModelDroidkitActorsMailboxActorDispatcher *dispatcher = ImActorModelDroidkitActorsConfEnvConfig_createDispatcherWithNSString_withInt_withImActorModelDroidkitActorsThreadPriorityEnum_withImActorModelDroidkitActorsActorSystem_(dispatcherId, [((id<ImActorModelDroidkitActorsConfJavaFactory>) nil_chk(ImActorModelDroidkitActorsConfEnvConfig_getJavaFactory())) getCoresCount], ImActorModelDroidkitActorsThreadPriorityEnum_get_LOW(), self);
    [self addDispatcherWithNSString:dispatcherId withImActorModelDroidkitActorsMailboxActorDispatcher:dispatcher];
  }
}

- (void)addDispatcherWithNSString:(NSString *)dispatcherId
withImActorModelDroidkitActorsMailboxActorDispatcher:(ImActorModelDroidkitActorsMailboxActorDispatcher *)dispatcher {
  @synchronized(dispatchers_) {
    if ([((JavaUtilHashMap *) nil_chk(dispatchers_)) containsKeyWithId:dispatcherId]) {
      return;
    }
    [dispatchers_ putWithId:dispatcherId withId:dispatcher];
  }
}

- (ImActorModelDroidkitActorsActorRef *)actorOfWithImActorModelDroidkitActorsActorSelection:(ImActorModelDroidkitActorsActorSelection *)selection {
  return [self actorOfWithImActorModelDroidkitActorsProps:[((ImActorModelDroidkitActorsActorSelection *) nil_chk(selection)) getProps] withNSString:[selection getPath]];
}

- (ImActorModelDroidkitActorsActorRef *)actorOfWithImActorModelDroidkitActorsProps:(ImActorModelDroidkitActorsProps *)props
                                                                      withNSString:(NSString *)path {
  NSString *dispatcherId = [((ImActorModelDroidkitActorsProps *) nil_chk(props)) getDispatcher] == nil ? ImActorModelDroidkitActorsActorSystem_DEFAULT_DISPATCHER_ : [props getDispatcher];
  ImActorModelDroidkitActorsMailboxActorDispatcher *mailboxesDispatcher;
  @synchronized(dispatchers_) {
    if (![((JavaUtilHashMap *) nil_chk(dispatchers_)) containsKeyWithId:dispatcherId]) {
      @throw [[[JavaLangRuntimeException alloc] initWithNSString:JreStrcat("$$C", @"Unknown dispatcherId '", dispatcherId, '\'')] autorelease];
    }
    mailboxesDispatcher = [dispatchers_ getWithId:dispatcherId];
  }
  return [((ImActorModelDroidkitActorsMailboxActorDispatcher *) nil_chk(mailboxesDispatcher)) referenceActorWithNSString:path withImActorModelDroidkitActorsProps:props];
}

- (id<ImActorModelDroidkitActorsDebugTraceInterface>)getTraceInterface {
  return traceInterface_;
}

- (void)setTraceInterfaceWithImActorModelDroidkitActorsDebugTraceInterface:(id<ImActorModelDroidkitActorsDebugTraceInterface>)traceInterface {
  ImActorModelDroidkitActorsActorSystem_set_traceInterface_(self, traceInterface);
}

- (void)dealloc {
  RELEASE_(dispatchers_);
  RELEASE_(traceInterface_);
  [super dealloc];
}

- (void)copyAllFieldsTo:(ImActorModelDroidkitActorsActorSystem *)other {
  [super copyAllFieldsTo:other];
  ImActorModelDroidkitActorsActorSystem_set_dispatchers_(other, dispatchers_);
  ImActorModelDroidkitActorsActorSystem_set_traceInterface_(other, traceInterface_);
}

+ (void)initialize {
  if (self == [ImActorModelDroidkitActorsActorSystem class]) {
    JreStrongAssignAndConsume(&ImActorModelDroidkitActorsActorSystem_mainSystem_, nil, [[ImActorModelDroidkitActorsActorSystem alloc] init]);
    J2OBJC_SET_INITIALIZED(ImActorModelDroidkitActorsActorSystem)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "system", NULL, "Lim.actor.model.droidkit.actors.ActorSystem;", 0x9, NULL },
    { "init", "ActorSystem", NULL, 0x1, NULL },
    { "initWithBoolean:", "ActorSystem", NULL, 0x1, NULL },
    { "addDispatcherWithNSString:withInt:", "addDispatcher", "V", 0x1, NULL },
    { "addDispatcherWithNSString:", "addDispatcher", "V", 0x1, NULL },
    { "addDispatcherWithNSString:withImActorModelDroidkitActorsMailboxActorDispatcher:", "addDispatcher", "V", 0x1, NULL },
    { "actorOfWithImActorModelDroidkitActorsActorSelection:", "actorOf", "Lim.actor.model.droidkit.actors.ActorRef;", 0x1, NULL },
    { "actorOfWithImActorModelDroidkitActorsProps:withNSString:", "actorOf", "Lim.actor.model.droidkit.actors.ActorRef;", 0x1, NULL },
    { "getTraceInterface", NULL, "Lim.actor.model.droidkit.actors.debug.TraceInterface;", 0x1, NULL },
    { "setTraceInterfaceWithImActorModelDroidkitActorsDebugTraceInterface:", "setTraceInterface", "V", 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "mainSystem_", NULL, 0x1a, "Lim.actor.model.droidkit.actors.ActorSystem;", &ImActorModelDroidkitActorsActorSystem_mainSystem_,  },
    { "DEFAULT_DISPATCHER_", NULL, 0x1a, "Ljava.lang.String;", &ImActorModelDroidkitActorsActorSystem_DEFAULT_DISPATCHER_,  },
    { "dispatchers_", NULL, 0x12, "Ljava.util.HashMap;", NULL,  },
    { "traceInterface_", NULL, 0x2, "Lim.actor.model.droidkit.actors.debug.TraceInterface;", NULL,  },
  };
  static const J2ObjcClassInfo _ImActorModelDroidkitActorsActorSystem = { 1, "ActorSystem", "im.actor.model.droidkit.actors", NULL, 0x1, 10, methods, 4, fields, 0, NULL};
  return &_ImActorModelDroidkitActorsActorSystem;
}

@end

ImActorModelDroidkitActorsActorSystem *ImActorModelDroidkitActorsActorSystem_system() {
  ImActorModelDroidkitActorsActorSystem_init();
  return ImActorModelDroidkitActorsActorSystem_mainSystem_;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelDroidkitActorsActorSystem)
